(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,n){e.exports=n(70)},55:function(e,t,n){},56:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(22),c=n.n(r),s=(n(55),n(48)),i=n(21),l=n(47),u=n(49),m=n(26),p=n(20),h=n(17),d=(n(56),n(5)),f=n(6),v=n(8),b=n(7),j=n(9),O=n(41),E=n.n(O),y="https://hacker-news.firebaseio.com",w=0,g=[],k=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"getNewsItem",value:function(e,t){var n=new Request("".concat(y,"/v0/item/").concat(e,".json"));fetch(n).then(function(e){if(200===e.status)return e.json();throw new Error("Something went wrong on api server!")}).then(function(e){t&&t(e)}).catch(function(e){console.error(e)})}},{key:"getNewsItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"topstories";if(g.length>0){w+=30;var n=g.slice(0,w);return e(n)}var a=new Request("".concat(y,"/v0/").concat(t,".json"));fetch(a).then(function(e){if(200===e.status)return e.json();throw new Error("Something went wrong on api server!")}).then(function(t){g=t,w+=30;var n=t.slice(0,w);e&&e(n)}).catch(function(e){console.error(e)})}},{key:"getBulkNewsItems",value:function(e,t){var n=[];e&&t&&(e.forEach(function(e){n.push(new Request("".concat(y,"/v0/item/").concat(e,".json")))}),Promise.all(n.map(function(e){return fetch(e).then(function(e){return e.json()})})).then(function(e){t(e)}))}}]),e}(),S=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"UpvoteURL",onClick:this.props.upvoteAction},"\u25b2")}}]),t}(o.a.Component),N=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(b.a)(t).call(this,e))).updateComments=function(e){n.setState({comments:e})},n.state={comments:[]},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.item,t=e&&e.kids;k.getBulkNewsItems(t,this.updateComments)}},{key:"render",value:function(){var e=this.state.comments,t=1;return e.length>0?o.a.createElement("div",null,"Comments",e.map(function(e){return e.deleted?o.a.createElement("div",null,o.a.createElement("i",null,"Deleted.")):o.a.createElement("p",{key:e.id},t++,". ",e.text)})):o.a.createElement("div",null,o.a.createElement("i",null,"No comments."))}}]),t}(o.a.Component),C=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(b.a)(t).call(this,e))).changeShowComments=function(){var e=n.state.showComments;n.setState({showComments:!e})},n.state={showComments:!1},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;if(this.props&&this.props.item){var t=this.props.item.by,n=this.props.score,a=this.props.item.time,r=this.props.item.kids?this.props.item.kids.length:0,c=new Date(1e3*a),s=Math.abs(Date.now()-c)/36e5,i="hours";s>24&&(i="days",s/=24);var l=this.props.openedStory===this.props.item.id;return o.a.createElement("div",null,n," points by ",t," |",Math.floor(s)," ",i," ago |",o.a.createElement("span",{className:"Comment",onClick:function(){e.props.changeOpenedStory(e.props.item.id)}},r," comments"),l&&o.a.createElement(N,{key:this.props.item.id,item:this.props.item}))}return o.a.createElement("div",null,"No data available.")}}]),t}(o.a.Component),x=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(b.a)(t).call(this,e))).upvoteAction=function(){var e=n.state&&n.state.score;n.setState({score:e+1})},n.buildScore=function(){var e=n.state&&n.state.score;return(n.state.item&&n.state.item.score)+e},n.parseURL=function(e){var t=document.createElement("a");return t.setAttribute("href",e),t},n.state={item:null,index:n.props.index,score:0},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.getNewsItem(this.props.itemId,function(t){return e.setState({item:t})})}},{key:"render",value:function(){var e=this.state.item,t=this.state.index,n=" "+(e&&e.title),a=e&&e.url,r=this.buildScore(),c=this.parseURL(a);return o.a.createElement("div",{className:"item"},t,". ",o.a.createElement(S,{upvoteAction:this.upvoteAction}),o.a.createElement("a",{href:a},n)," (",c.hostname,")",o.a.createElement(C,{item:e,score:r,changeOpenedStory:this.props.changeOpenedStory,openedStory:this.props.openedStory}))}}]),t}(o.a.Component),I=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(b.a)(t).call(this,e))).loadItems=function(){var e=n.props&&n.props.endpoint||"topstories";k.getNewsItems(function(e){return n.setState({items:e})},e)},n.changeOpenedStory=function(e){var t=n.state.openedStory;e&&t!==e?n.setState({openedStory:e}):n.setState({openedStory:0})},n.state={items:null,isLoading:!1,openedStory:0},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"render",value:function(){var e=this,t=this.state.items;return t||(t=[]),o.a.createElement("div",{className:"container"},o.a.createElement(E.a,{dataLength:t.length,next:this.loadItems,hasMore:!0,loader:o.a.createElement("h4",null,"Loading..."),endMessage:o.a.createElement("p",{style:{textAlign:"center"}},o.a.createElement("b",null,"Yay! You have seen it all"))},t.map(function(t,n){return o.a.createElement(x,{key:n,index:n,itemId:t,changeOpenedStory:e.changeOpenedStory,openedStory:e.state.openedStory})})))}}]),t}(o.a.Component),A=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createElement(I,{endpoint:"topstories"})}}]),t}(o.a.Component),M=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createElement(I,{endpoint:"beststories"})}}]),t}(o.a.Component),B=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createElement(I,{endpoint:"newstories"})}}]),t}(o.a.Component);var D=function(){return o.a.createElement(p.a,{className:"App"},o.a.createElement(i.a,{bg:"light",expand:"lg",sticky:"top"},o.a.createElement(i.a.Brand,{href:"#home"},"HackerNews"),o.a.createElement(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(s.a,{className:"mr-auto"},o.a.createElement(p.b,{to:"/top",className:"nav-link"},"Top"),o.a.createElement(p.b,{to:"/new",className:"nav-link"},"New"),o.a.createElement(p.b,{to:"/best",className:"nav-link"},"Best")),o.a.createElement(u.a,{inline:!0},o.a.createElement(m.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),o.a.createElement(l.a,{variant:"outline-success"},"Search")))),o.a.createElement(h.c,null,o.a.createElement(h.a,{exact:!0,path:"/top",component:A}),o.a.createElement(h.a,{exact:!0,path:"/new",component:B}),o.a.createElement(h.a,{exact:!0,path:"/best",component:M}),o.a.createElement(h.a,{exact:!0,path:"/",component:A})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(69);c.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[50,1,2]]]);
//# sourceMappingURL=main.ef4ff4fe.chunk.js.map